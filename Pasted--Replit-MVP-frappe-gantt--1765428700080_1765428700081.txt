この Replit プロジェクトには、すでに「生産管理ミニMVP」の中に「案件別ガントチャート」画面があります。
現状は frappe-gantt を使ったシンプルなタイムライン表示ですが、これを次のような「本格的ガントチャート UI」に改善してください。

参考イメージは、左側にプロジェクト・タスク一覧の表、右側に日付グリッドとガントバーが並ぶ一般的なガントチャートです（プロジェクトごとにタスクがまとまり、右側は日付ごとのマス目、今日の列が黄色、土日がグレー、計画（グレー）と実績（青）のバーが重なっているようなイメージ）。

以下の条件にしたがって、既存コードを読み込んだ上で改善・リファクタリング を行ってください。新規にゼロから作り直すのではなく、「今ある案件別ガントチャート画面を、参考デザインに近づける」ことを目的にしてください。

【1. 対象と前提】

「案件別ガントチャート」ページ（生産管理ミニMVPのメニューのガントチャート）に関係するコンポーネント・ルート・API をすべて特定し、その範囲内で改善してください。

すでにある案件データ・工程データの構造は活かしつつ、ガント表示のために必要な変換処理を追加してください。

frappe-gantt をそのまま使っても、独自のガント描画コンポーネントに置き換えても構いませんが、最終的に「参考画像のような UI」に近づくことを優先してください。

【2. レイアウト構成】

画面を次の 3 つの領域に分けてください。

画面上部：フィルタエリア

「Today」ボタン

表示範囲の開始日・終了日（既存の入力をそのまま利用）

案件名で絞り込みのテキストボックス

これらがガント表示内容ときちんと連動するようにすること。

左側：案件・タスク一覧（縦方向の表）

案件（プロジェクト）ごとに見出し行を表示し、その下に工程（タスク）行を表示してください。

見出し例：
「Aoyagi Project」
「Ikuta Project」
のように案件名を太字で表示し、その下に工程名・開始日・終了日・進捗率を行ごとに表示する。

案件見出しの左に「▼／▲」を付けて、クリックで工程リストを開閉できるようにしてください。

右側：ガントチャート領域

左のタスク一覧と 1 行ずつ高さをそろえて、1 行 = 1 工程 になるようにしてください。

左側の表と右側のガント領域は、縦スクロールが完全に同期するようにしてください。

ガント領域は横スクロール可能とし、日付ヘッダーとバーエリアの横スクロールを同期させてください。

【3. 日付ヘッダーとグリッド】

ガントの上部に、以下の 3 段構成の日付ヘッダーを表示してください。
1段目：月（例：9, 10）
2段目：曜日（Mon, Tue, Wed …）
3段目：日（1, 2, 3 …）

表示範囲の開始日〜終了日まで、1日単位で縦の列を作ってください。

背景は「日付グリッド」がはっきりわかるようにマス目状にしてください。

土日（休日）は、その列全体の背景色を薄いグレーにして、平日と区別できるようにしてください。

「今日」の列は、参考画像のように黄系の帯で強調してください。Today ボタンを押したときには、この列が画面中央付近に来るようにスクロール位置を調整してください。

【4. ガントバー（計画と実績）】

基本

各工程ごとに、ガントバーを 1 本描画してください。

横方向の位置と長さは、「表示開始日からその工程の開始日までの日数差 × 1 日あたりの幅」で開始位置を決め、「開始日から終了日までの日数 × 1 日あたりの幅」で長さを決めるイメージで計算してください。

計画バー（グレー）と実績バー（青）

「薄いグレーのバー」を工程全期間（開始日〜終了日）に表示し、これを「計画・ベースライン」としてください。

その上に、「進捗率」に応じて長さが変わる「青いバー」を重ねて表示してください。
例：進捗 40％なら、グレーの 40％ぶんだけ青いバーが伸びる。

進捗 0％の場合はグレーだけ、100％の場合はほぼ青で塗りつぶされるようなイメージです。

テキストとツールチップ

バーの中には「案件番号＋工程名」などの簡易なラベルを表示してください。

ラベルがバーからはみ出す場合は末尾を「…」で省略し、ホバー時にフルテキストをツールチップで見られるようにしてください。

クリック動作

バーをクリックしたときに、既存の案件詳細や工程編集画面に遷移できるように、今あるルーティングやハンドラを活かして接続してください（もし既存処理がなければ、将来用のクリックイベントフックだけ用意してください）。

【5. フィルタとデータ連動】

開始日・終了日フィルタ：

指定された期間にかかる工程だけを表示してください（完全に範囲外の工程は非表示、端だけかかる場合は表示範囲内に切り詰めて描画）。

案件名で絞り込み：

テキストボックスに入力した文字列を、案件名・案件コードなどに部分一致で検索してフィルタしてください。

フィルタ後の結果が 0 件のときは、「該当する案件はありません」などのメッセージを表示してください。

既存の案件・工程データ構造から、ガント描画用のデータ（案件名、工程名、開始日、終了日、進捗率）を作る変換処理を、わかりやすい専用関数として切り出してください。

【6. コード構造・リファクタリング】

案件別ガントチャート画面を、次のようなコンポーネント構成に整理してください（名称は近いものであれば変更可）：

ページ全体：GanttPage（フィルタ＋左表＋右ガントをまとめる）

フィルタ部分：GanttFilters（開始・終了日、Today、案件名絞り込み）

左の案件・工程一覧：GanttTaskList

右のガント表示：GanttGrid / GanttChart

ツールチップなど補助コンポーネント

状態管理を整理し、

フィルタ条件

元データ

フィルタ後の表示用データ
が分かりやすく追えるようにしてください。

any 型の乱用を避け、案件・工程の型、ガント用タスク型をきちんと定義してください。

既存のルーティングや他画面への影響が出ないように注意しつつ、読みやすく拡張しやすい構造にリファクタリングしてください。

【7. 完了後に私に説明してほしいこと】

実装・リファクタリングが終わったら、次の点を日本語で説明してください。

どのファイルを新規作成・修正したか

UI がどのように変わったか（参考画像との対応関係も含めて）

今後、私が自分で機能追加（例：週・月単位ビュー切り替え、バーのドラッグで日付変更など）を行うときに、主にどのコンポーネントやロジックを触ればよいか

可能であれば、「将来こんな拡張がしやすい」という観点で、改善ポイントや提案も箇条書きで教えてください。